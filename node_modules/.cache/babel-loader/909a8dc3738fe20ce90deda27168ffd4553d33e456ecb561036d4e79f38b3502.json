{"ast":null,"code":"var _jsxFileName = \"/home/fernando/Documents/new-app/src/components/Pages/Vendas.js\",\n  _s = $RefreshSig$();\n// src/components/Pages/Vendas.js\nimport React, { useState, useEffect } from 'react';\nimport { useCafeteria } from '../../contexts/CafeteriaContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useVendas } from '../../contexts/VendasContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Vendas = () => {\n  _s();\n  const {\n    currentCafeteria\n  } = useCafeteria();\n  const {\n    user\n  } = useAuth();\n  const {\n    registrarVenda\n  } = useVendas();\n  const [produtos, setProdutos] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filteredProdutos, setFilteredProdutos] = useState([]);\n  const [itensVenda, setItensVenda] = useState([]);\n  const [isVendaColaborador, setIsVendaColaborador] = useState(false);\n  const [colaboradorSelecionado, setColaboradorSelecionado] = useState('');\n  const [tipoPagamento, setTipoPagamento] = useState('dinheiro');\n  const [colaboradores, setColaboradores] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Função para calcular o total\n  const calcularTotal = () => {\n    return itensVenda.reduce((total, item) => total + item.subtotal, 0);\n  };\n\n  // Buscar produtos e colaboradores do backend\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n\n        // Buscar produtos\n        const produtosResponse = await fetch('http://localhost:5001/api/products');\n        const produtosData = await produtosResponse.json();\n        setProdutos(produtosData);\n        setFilteredProdutos(produtosData);\n\n        // Buscar colaboradores\n        const colaboradoresResponse = await fetch('http://localhost:5001/api/collaborators');\n        const colaboradoresData = await colaboradoresResponse.json();\n        setColaboradores(colaboradoresData);\n      } catch (error) {\n        console.error('Erro ao buscar dados:', error);\n        alert('Erro ao carregar dados do servidor');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n  useEffect(() => {\n    // Filtro de produtos com autocomplete\n    const filtered = produtos.filter(produto => (produto.nome || '').toLowerCase().includes(searchTerm.toLowerCase()));\n    setFilteredProdutos(filtered);\n  }, [searchTerm, produtos]);\n  const adicionarItem = produto => {\n    const itemExistente = itensVenda.find(item => item.id === produto._id || item._id === produto._id);\n    if (itemExistente) {\n      setItensVenda(itensVenda.map(item => item.id === produto._id || item._id === produto._id ? {\n        ...item,\n        quantidade: item.quantidade + 1,\n        subtotal: (item.quantidade + 1) * (item.preco || item.price || 0)\n      } : item));\n    } else {\n      setItensVenda([...itensVenda, {\n        ...produto,\n        id: produto._id,\n        quantidade: 1,\n        subtotal: produto.preco || produto.price || 0\n      }]);\n    }\n    setSearchTerm('');\n  };\n  const removerItem = id => {\n    setItensVenda(itensVenda.filter(item => item.id !== id && item._id !== id));\n  };\n  const atualizarQuantidade = (id, novaQuantidade) => {\n    if (novaQuantidade <= 0) {\n      removerItem(id);\n      return;\n    }\n    setItensVenda(itensVenda.map(item => item.id === id || item._id === id ? {\n      ...item,\n      quantidade: novaQuantidade,\n      subtotal: novaQuantidade * (item.preco || item.price || 0)\n    } : item));\n  };\n  const finalizarVenda = async () => {\n    if (itensVenda.length === 0) {\n      alert('Adicione itens à venda!');\n      return;\n    }\n    if (isVendaColaborador && !colaboradorSelecionado) {\n      alert('Selecione um colaborador!');\n      return;\n    }\n    const venda = {\n      cafeteria: (currentCafeteria === null || currentCafeteria === void 0 ? void 0 : currentCafeteria.nome) || 'Cafeteria Principal',\n      itens: itensVenda.map(item => ({\n        productId: item.id || item._id,\n        name: item.nome || item.name,\n        price: item.preco || item.price,\n        quantity: item.quantidade,\n        subtotal: item.subtotal\n      })),\n      usuario: (user === null || user === void 0 ? void 0 : user.email) || 'Usuário não identificado',\n      tipoPagamento: isVendaColaborador ? 'débito corporativo' : tipoPagamento,\n      total: calcularTotal(),\n      collaboratorId: isVendaColaborador ? colaboradorSelecionado : null\n    };\n    try {\n      const response = await fetch('http://localhost:5001/api/sales', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(venda)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Erro ao registrar venda');\n      }\n      const vendaRegistrada = await response.json();\n      console.log('Venda registrada:', vendaRegistrada);\n      alert('Venda registrada com sucesso!');\n\n      // Limpar formulário\n      setItensVenda([]);\n      setIsVendaColaborador(false);\n      setColaboradorSelecionado('');\n      setTipoPagamento('dinheiro');\n    } catch (error) {\n      console.error('Erro ao registrar venda:', error);\n      alert(error.message || 'Erro ao registrar venda!');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Registrar Venda\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-info\",\n      children: \"Carregando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Selecionar Produtos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                placeholder: \"Buscar produto...\",\n                value: searchTerm,\n                onChange: e => setSearchTerm(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"list-group\",\n              children: filteredProdutos.map(produto => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"list-group-item list-group-item-action\",\n                onClick: () => adicionarItem(produto),\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: produto.nome || produto.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                      className: \"text-muted\",\n                      children: produto.categoria || produto.category\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 190,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"badge bg-primary rounded-pill\",\n                      children: [\"R$ \", (produto.preco || produto.price || 0).toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 21\n                }, this)\n              }, produto._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Finalizar Venda\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Forma de Pagamento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                value: tipoPagamento,\n                onChange: e => setTipoPagamento(e.target.value),\n                disabled: isVendaColaborador,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"dinheiro\",\n                  children: \"Dinheiro\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"cartao\",\n                  children: \"Cart\\xE3o\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"pix\",\n                  children: \"PIX\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3 form-check\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                className: \"form-check-input\",\n                checked: isVendaColaborador,\n                onChange: e => {\n                  setIsVendaColaborador(e.target.checked);\n                  if (e.target.checked) setTipoPagamento('débito corporativo');\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-check-label\",\n                children: \"Venda para colaborador\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), isVendaColaborador && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Selecionar Colaborador\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                value: colaboradorSelecionado,\n                onChange: e => setColaboradorSelecionado(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Selecione...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 21\n                }, this), colaboradores.map(colab => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: colab._id,\n                  children: [colab.name, \" - \", colab.department, \" (Saldo: R$ \", colab.availableBalance.toFixed(2), \")\"]\n                }, colab._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"Itens da Venda\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 17\n              }, this), itensVenda.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-muted\",\n                children: \"Nenhum item adicionado\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"table-responsive\",\n                children: /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table table-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Produto\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 269,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Qtd\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 270,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Pre\\xE7o\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 271,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Subtotal\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 272,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"A\\xE7\\xE3o\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 273,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 268,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: itensVenda.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: item.nome || item.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 279,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"number\",\n                          min: \"1\",\n                          className: \"form-control form-control-sm\",\n                          style: {\n                            width: '60px'\n                          },\n                          value: item.quantidade,\n                          onChange: e => atualizarQuantidade(item.id || item._id, parseInt(e.target.value))\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 281,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 280,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [\"R$ \", (item.preco || item.price || 0).toFixed(2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 290,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [\"R$ \", item.subtotal.toFixed(2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 291,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"btn btn-danger btn-sm\",\n                          onClick: () => removerItem(item.id || item._id),\n                          children: \"\\xD7\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 293,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 292,\n                        columnNumber: 29\n                      }, this)]\n                    }, item.id || item._id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 278,\n                      columnNumber: 27\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [\"Total: R$ \", calcularTotal().toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: finalizarVenda,\n                disabled: itensVenda.length === 0,\n                children: \"Finalizar Venda\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary\",\n                onClick: () => {\n                  setItensVenda([]);\n                  setIsVendaColaborador(false);\n                  setColaboradorSelecionado('');\n                },\n                children: \"Cancelar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n};\n_s(Vendas, \"pFNXI3xKq7+gEJGITzJzw1LriSM=\", false, function () {\n  return [useCafeteria, useAuth, useVendas];\n});\n_c = Vendas;\nexport default Vendas;\nvar _c;\n$RefreshReg$(_c, \"Vendas\");","map":{"version":3,"names":["React","useState","useEffect","useCafeteria","useAuth","useVendas","jsxDEV","_jsxDEV","Vendas","_s","currentCafeteria","user","registrarVenda","produtos","setProdutos","searchTerm","setSearchTerm","filteredProdutos","setFilteredProdutos","itensVenda","setItensVenda","isVendaColaborador","setIsVendaColaborador","colaboradorSelecionado","setColaboradorSelecionado","tipoPagamento","setTipoPagamento","colaboradores","setColaboradores","loading","setLoading","calcularTotal","reduce","total","item","subtotal","fetchData","produtosResponse","fetch","produtosData","json","colaboradoresResponse","colaboradoresData","error","console","alert","filtered","filter","produto","nome","toLowerCase","includes","adicionarItem","itemExistente","find","id","_id","map","quantidade","preco","price","removerItem","atualizarQuantidade","novaQuantidade","finalizarVenda","length","venda","cafeteria","itens","productId","name","quantity","usuario","email","collaboratorId","response","method","headers","body","JSON","stringify","ok","errorData","Error","message","vendaRegistrada","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","categoria","category","toFixed","disabled","checked","colab","department","availableBalance","min","style","width","parseInt","_c","$RefreshReg$"],"sources":["/home/fernando/Documents/new-app/src/components/Pages/Vendas.js"],"sourcesContent":["// src/components/Pages/Vendas.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useCafeteria } from '../../contexts/CafeteriaContext';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useVendas } from '../../contexts/VendasContext';\r\n\r\nconst Vendas = () => {\r\n  const { currentCafeteria } = useCafeteria();\r\n  const { user } = useAuth();\r\n  const { registrarVenda } = useVendas();\r\n  const [produtos, setProdutos] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filteredProdutos, setFilteredProdutos] = useState([]);\r\n  const [itensVenda, setItensVenda] = useState([]);\r\n  const [isVendaColaborador, setIsVendaColaborador] = useState(false);\r\n  const [colaboradorSelecionado, setColaboradorSelecionado] = useState('');\r\n  const [tipoPagamento, setTipoPagamento] = useState('dinheiro');\r\n  const [colaboradores, setColaboradores] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Função para calcular o total\r\n  const calcularTotal = () => {\r\n    return itensVenda.reduce((total, item) => total + item.subtotal, 0);\r\n  };\r\n\r\n  // Buscar produtos e colaboradores do backend\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Buscar produtos\r\n        const produtosResponse = await fetch('http://localhost:5001/api/products');\r\n        const produtosData = await produtosResponse.json();\r\n        setProdutos(produtosData);\r\n        setFilteredProdutos(produtosData);\r\n        \r\n        // Buscar colaboradores\r\n        const colaboradoresResponse = await fetch('http://localhost:5001/api/collaborators');\r\n        const colaboradoresData = await colaboradoresResponse.json();\r\n        setColaboradores(colaboradoresData);\r\n        \r\n      } catch (error) {\r\n        console.error('Erro ao buscar dados:', error);\r\n        alert('Erro ao carregar dados do servidor');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Filtro de produtos com autocomplete\r\n    const filtered = produtos.filter(produto =>\r\n      (produto.nome || '').toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n    setFilteredProdutos(filtered);\r\n  }, [searchTerm, produtos]);\r\n\r\n  const adicionarItem = (produto) => {\r\n    const itemExistente = itensVenda.find(item => item.id === produto._id || item._id === produto._id);\r\n    \r\n    if (itemExistente) {\r\n      setItensVenda(itensVenda.map(item =>\r\n        (item.id === produto._id || item._id === produto._id)\r\n          ? { ...item, quantidade: item.quantidade + 1, subtotal: (item.quantidade + 1) * (item.preco || item.price || 0) }\r\n          : item\r\n      ));\r\n    } else {\r\n      setItensVenda([...itensVenda, {\r\n        ...produto,\r\n        id: produto._id,\r\n        quantidade: 1,\r\n        subtotal: produto.preco || produto.price || 0\r\n      }]);\r\n    }\r\n    setSearchTerm('');\r\n  };\r\n\r\n  const removerItem = (id) => {\r\n    setItensVenda(itensVenda.filter(item => item.id !== id && item._id !== id));\r\n  };\r\n\r\n  const atualizarQuantidade = (id, novaQuantidade) => {\r\n    if (novaQuantidade <= 0) {\r\n      removerItem(id);\r\n      return;\r\n    }\r\n\r\n    setItensVenda(itensVenda.map(item =>\r\n      (item.id === id || item._id === id)\r\n        ? { ...item, quantidade: novaQuantidade, subtotal: novaQuantidade * (item.preco || item.price || 0) }\r\n        : item\r\n    ));\r\n  };\r\n\r\n  const finalizarVenda = async () => {\r\n    if (itensVenda.length === 0) {\r\n      alert('Adicione itens à venda!');\r\n      return;\r\n    }\r\n\r\n    if (isVendaColaborador && !colaboradorSelecionado) {\r\n      alert('Selecione um colaborador!');\r\n      return;\r\n    }\r\n\r\n    const venda = {\r\n      cafeteria: currentCafeteria?.nome || 'Cafeteria Principal',\r\n      itens: itensVenda.map(item => ({\r\n        productId: item.id || item._id,\r\n        name: item.nome || item.name,\r\n        price: item.preco || item.price,\r\n        quantity: item.quantidade,\r\n        subtotal: item.subtotal\r\n      })),\r\n      usuario: user?.email || 'Usuário não identificado',\r\n      tipoPagamento: isVendaColaborador ? 'débito corporativo' : tipoPagamento,\r\n      total: calcularTotal(),\r\n      collaboratorId: isVendaColaborador ? colaboradorSelecionado : null\r\n    };\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5001/api/sales', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(venda)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Erro ao registrar venda');\r\n      }\r\n\r\n      const vendaRegistrada = await response.json();\r\n      console.log('Venda registrada:', vendaRegistrada);\r\n      alert('Venda registrada com sucesso!');\r\n      \r\n      // Limpar formulário\r\n      setItensVenda([]);\r\n      setIsVendaColaborador(false);\r\n      setColaboradorSelecionado('');\r\n      setTipoPagamento('dinheiro');\r\n      \r\n    } catch (error) {\r\n      console.error('Erro ao registrar venda:', error);\r\n      alert(error.message || 'Erro ao registrar venda!');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <h2>Registrar Venda</h2>\r\n      \r\n      {loading && <div className=\"alert alert-info\">Carregando...</div>}\r\n      \r\n      <div className=\"row\">\r\n        {/* Coluna de Produtos */}\r\n        <div className=\"col-md-6\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <h5>Selecionar Produtos</h5>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"mb-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Buscar produto...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"list-group\">\r\n                {filteredProdutos.map(produto => (\r\n                  <button\r\n                    key={produto._id}\r\n                    className=\"list-group-item list-group-item-action\"\r\n                    onClick={() => adicionarItem(produto)}\r\n                  >\r\n                    <div className=\"d-flex justify-content-between\">\r\n                      <div>\r\n                        <strong>{produto.nome || produto.name}</strong>\r\n                        <br />\r\n                        <small className=\"text-muted\">{produto.categoria || produto.category}</small>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"badge bg-primary rounded-pill\">\r\n                          R$ {(produto.preco || produto.price || 0).toFixed(2)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Coluna de Finalização */}\r\n        <div className=\"col-md-6\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <h5>Finalizar Venda</h5>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {/* Forma de Pagamento */}\r\n              <div className=\"mb-3\">\r\n                <label className=\"form-label\">Forma de Pagamento</label>\r\n                <select\r\n                  className=\"form-select\"\r\n                  value={tipoPagamento}\r\n                  onChange={(e) => setTipoPagamento(e.target.value)}\r\n                  disabled={isVendaColaborador}\r\n                >\r\n                  <option value=\"dinheiro\">Dinheiro</option>\r\n                  <option value=\"cartao\">Cartão</option>\r\n                  <option value=\"pix\">PIX</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Venda para colaborador */}\r\n              <div className=\"mb-3 form-check\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"form-check-input\"\r\n                  checked={isVendaColaborador}\r\n                  onChange={(e) => {\r\n                    setIsVendaColaborador(e.target.checked);\r\n                    if (e.target.checked) setTipoPagamento('débito corporativo');\r\n                  }}\r\n                />\r\n                <label className=\"form-check-label\">Venda para colaborador</label>\r\n              </div>\r\n\r\n              {isVendaColaborador && (\r\n                <div className=\"mb-3\">\r\n                  <label className=\"form-label\">Selecionar Colaborador</label>\r\n                  <select\r\n                    className=\"form-select\"\r\n                    value={colaboradorSelecionado}\r\n                    onChange={(e) => setColaboradorSelecionado(e.target.value)}\r\n                  >\r\n                    <option value=\"\">Selecione...</option>\r\n                    {colaboradores.map(colab => (\r\n                      <option key={colab._id} value={colab._id}>\r\n                        {colab.name} - {colab.department} (Saldo: R$ {colab.availableBalance.toFixed(2)})\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              {/* Itens da Venda */}\r\n              <div className=\"mb-3\">\r\n                <h6>Itens da Venda</h6>\r\n                {itensVenda.length === 0 ? (\r\n                  <p className=\"text-muted\">Nenhum item adicionado</p>\r\n                ) : (\r\n                  <div className=\"table-responsive\">\r\n                    <table className=\"table table-sm\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th>Produto</th>\r\n                          <th>Qtd</th>\r\n                          <th>Preço</th>\r\n                          <th>Subtotal</th>\r\n                          <th>Ação</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {itensVenda.map(item => (\r\n                          <tr key={item.id || item._id}>\r\n                            <td>{item.nome || item.name}</td>\r\n                            <td>\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                className=\"form-control form-control-sm\"\r\n                                style={{ width: '60px' }}\r\n                                value={item.quantidade}\r\n                                onChange={(e) => atualizarQuantidade(item.id || item._id, parseInt(e.target.value))}\r\n                              />\r\n                            </td>\r\n                            <td>R$ {(item.preco || item.price || 0).toFixed(2)}</td>\r\n                            <td>R$ {item.subtotal.toFixed(2)}</td>\r\n                            <td>\r\n                              <button\r\n                                className=\"btn btn-danger btn-sm\"\r\n                                onClick={() => removerItem(item.id || item._id)}\r\n                              >\r\n                                ×\r\n                              </button>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Total */}\r\n              <div className=\"mb-3\">\r\n                <h4>Total: R$ {calcularTotal().toFixed(2)}</h4>\r\n              </div>\r\n\r\n              {/* Botões */}\r\n              <div className=\"d-grid gap-2\">\r\n                <button\r\n                  className=\"btn btn-success\"\r\n                  onClick={finalizarVenda}\r\n                  disabled={itensVenda.length === 0}\r\n                >\r\n                  Finalizar Venda\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={() => {\r\n                    setItensVenda([]);\r\n                    setIsVendaColaborador(false);\r\n                    setColaboradorSelecionado('');\r\n                  }}\r\n                >\r\n                  Cancelar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Vendas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}